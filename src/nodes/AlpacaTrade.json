{
  "name": "AlpacaTrade",
  "def": "Alpaca Trade",
  "node_type": "main",
  "icon": "/assets/icons/alpaca.svg",
  "category": "Broker",
  "subCategory":"Alpaca",
  "description": "Execute trades through Alpaca Markets",
  "color": "text-red-500",
  "size": { "width": 340, "height": 360 },
  "handles": [
    { "type": "target", "position": "left", "id": "input" },
    { "type": "source", "position": "right", "id": "output" }
  ],
  "auth": "GenericAuthModal",
  "authFields": [
    {
      "key": "credential_name",
      "label": "Credential Label",
      "type": "text",
      "default": "My Alpaca"
    },
    {
      "key": "api_key",
      "label": "API Key",
      "type": "password",
      "placeholder": "Your Alpaca API Key"
    },
    {
      "key": "secret_key",
      "label": "Secret Key",
      "type": "password",
      "placeholder": "Your Alpaca Secret Key"
    }
  ],
  "authAction": { "url": "/alpaca/auth-url", "method": "POST" },

  "action": { "url": "/alpaca/place_order", "method": "POST" },
  "fields": [
    {
      "key": "operation",
      "label": "Operation",
      "type": "hidden",
      "default": "place_order"
    },
    {
      "key": "credential_id",
      "label": "Credential",
      "type": "select",
      "optionsSource": "credentialsApi",
      "placeholder": "Select credential",
      "required": true
    },
    {
      "key": "asset_type",
      "label": "Asset Type",
      "type": "select",
      "options": [
        { "id": "stock", "name": "Stock" },
        { "id": "crypto", "name": "Crypto" }
      ],
      "default": "stock",
      "required": true
    },
    {
      "key": "symbol",
      "label": "Stock Symbol",
      "type": "text",
      "placeholder": "e.g. AAPL",
      "required": true,
      "displayOptions": {
        "show": {
          "asset_type": ["stock"]
        }
      }
    },
    {
      "key": "symbol",
      "label": "Crypto Pair",
      "type": "text",
      "placeholder": "e.g. BTC/USD",
      "required": true,
      "displayOptions": {
        "show": {
          "asset_type": ["crypto"]
        }
      }
    },
    {
      "key": "side",
      "label": "Side",
      "type": "select",
      "options": [
        { "id": "buy", "name": "Buy" },
        { "id": "sell", "name": "Sell" }
      ],
      "default": "buy",
      "required": true
    },
    {
      "key": "qty",
      "label": "Quantity",
      "type": "text",
      "placeholder": "e.g. 1",
      "required": true
    },
    {
      "key": "type",
      "label": "Order Type",
      "type": "select",
      "options": [
        { "id": "market", "name": "Market" },
        { "id": "limit", "name": "Limit" }
      ],
      "default": "market",
      "required": true
    },
    {
      "key": "time_in_force",
      "label": "Time In Force",
      "type": "select",
      "options": [
        { "id": "day", "name": "Day" },
        { "id": "gtc", "name": "Good Till Cancelled" },
        { "id": "fok", "name": "Fill Or Kill" },
        { "id": "ioc", "name": "Immediate Or Cancel" }
      ],
      "default": "day",
      "required": true,
      "displayOptions": {
        "show": {
          "asset_type": ["stock"]
        }
      }
    },
    {
      "key": "time_in_force",
      "label": "Time In Force",
      "type": "select",
      "options": [
        { "id": "gtc", "name": "Good Till Cancelled" },
        { "id": "fok", "name": "Fill Or Kill" },
        { "id": "ioc", "name": "Immediate Or Cancel" }
      ],
      "default": "gtc",
      "required": true,
      "displayOptions": {
        "show": {
          "asset_type": ["crypto"]
        }
      }
    }
  ]
}
